(()=>{"use strict";var __webpack_modules__={461:()=>{eval("\n;// CONCATENATED MODULE: ./sources-js/pieces-classes/piece.js\nclass Piece {\r\n    constructor (color, type, chessboard, positionX, positionY) {\r\n        this.color = color;\r\n        this.type = type;\r\n        this.img = 'url(img/pieces/' + type.toLowerCase() + '_' + color +'.svg)';\r\n        this.chessboard = chessboard;\r\n        this.positionX = positionX;\r\n        this.positionY = positionY;\r\n    }\r\n    \r\n}\n;// CONCATENATED MODULE: ./sources-js/pieces-classes/pawn.js\n\r\n\r\nclass Pawn extends Piece {\r\n    constructor (color, type, chessboard, positionX, positionY) {\r\n        super(color,type, chessboard, positionX, positionY);\r\n    }\r\n    defineMoves () {\r\n        let potentialMoveX = this.positionX;\r\n        let potentialMoveY;\r\n        //ход вперед (не рубит)\r\n        let maxMove;\r\n        let vertical;\r\n        if (\r\n            this.positionY == 1 && this.color == 'white' || \r\n            this.positionY == 6 && this.color == 'black'\r\n            ) \r\n            {maxMove = 2;}\r\n        else {maxMove = 1;} \r\n        for (vertical = 1; vertical <=maxMove; vertical++) {\r\n            if (this.color == 'white') {potentialMoveY = this.positionY + vertical;}\r\n            if (this.color == 'black') {potentialMoveY = this.positionY - vertical;}\r\n            \r\n            if (!(this['chessboard']['board'][potentialMoveX][potentialMoveY] == null)) {break;}\r\n            this.chessboard.possibleMoves.push([potentialMoveX, potentialMoveY]);  \r\n        }\r\n        //срубить фигуру\r\n        vertical = 1;\r\n        if (this.color == 'white') {potentialMoveY = this.positionY + vertical;}\r\n        if (this.color == 'black') {potentialMoveY = this.positionY - vertical;}\r\n        for (let shiftX = -1; shiftX <= 1; shiftX +=2) {\r\n            potentialMoveX = this.positionX + shiftX;\r\n            if (potentialMoveY > 7 ||\r\n                potentialMoveY < 0 ||\r\n                potentialMoveX > 7 ||\r\n                potentialMoveX < 0 ||\r\n                this['chessboard']['board'][potentialMoveX][potentialMoveY] == null ||\r\n                this.color == this['chessboard']['board'][potentialMoveX][potentialMoveY]['color']\r\n                ) {continue;}\r\n            this.chessboard.possibleMoves.push([potentialMoveX, potentialMoveY]);  \r\n        }\r\n    }\r\n}\n;// CONCATENATED MODULE: ./sources-js/chessboard.js\n\r\n\r\n\r\nclass Chessboard {\r\n    constructor (targetNode) {\r\n        this.initialPosition = [\r\n            //whites\r\n            {piece: \"pawn\", color: 'white', positionX: 0, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 1, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 2, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 3, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 4, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 5, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 6, positionY: 1},\r\n            {piece: \"pawn\", color: 'white', positionX: 7, positionY: 1},\r\n            {piece: \"rook\", color: 'white', positionX: 0, positionY: 0},\r\n            {piece: \"knight\", color: 'white', positionX: 1, positionY: 0},\r\n            {piece: \"beeshop\", color: 'white', positionX: 2, positionY: 0},\r\n            {piece: \"king\", color: 'white', positionX: 3, positionY: 0},\r\n            {piece: \"queen\", color: 'white', positionX: 4, positionY: 0},\r\n            {piece: \"beeshop\", color: 'white', positionX: 5, positionY: 0},\r\n            {piece: \"knight\", color: 'white', positionX: 6, positionY: 0},\r\n            {piece: \"rook\", color: 'white', positionX: 7, positionY: 0},\r\n            //blacks\r\n            {piece: \"pawn\", color: 'black', positionX: 0, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 1, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 2, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 3, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 4, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 5, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 6, positionY: 6},\r\n            {piece: \"pawn\", color: 'black', positionX: 7, positionY: 6},\r\n            {piece: \"rook\", color: 'black', positionX: 0, positionY: 7},\r\n            {piece: \"knight\", color: 'black', positionX: 1, positionY: 7},\r\n            {piece: \"beeshop\", color: 'black', positionX: 2, positionY: 7},\r\n            {piece: \"king\", color: 'black', positionX: 3, positionY: 7},\r\n            {piece: \"queen\", color: 'black', positionX: 4, positionY: 7},\r\n            {piece: \"beeshop\", color: 'black', positionX: 5, positionY: 7},\r\n            {piece: \"knight\", color: 'black', positionX: 6, positionY: 7},\r\n            {piece: \"rook\", color: 'black', positionX: 7, positionY: 7},\r\n            //--------------------------------------------------------------\r\n            {piece: \"queen\", color: 'black', positionX: 3, positionY: 2},\r\n            {piece: \"queen\", color: 'black', positionX: 3, positionY: 5},\r\n        ];\r\n        this.targetNode = targetNode;\r\n        this.turn = 'white'; \r\n        this.stage = \"select piece\"; //Возможные значения: select piece, select move\r\n        this.selectedPiece = null; \r\n        this.selectedPosition = null; //Возможные значения: null или массив позиции выбранной фигуры\r\n        this.possibleMoves = []; \r\n        this.board = []; \r\n        this.createBoard();\r\n    }\r\n\r\n    createBoard () {\r\n        \r\n        for (let row = 0; row < 8; row++ ) {\r\n            this.board.push([]);\r\n            let stripe = this['board'][row];\r\n            for (let column = 0; column < 8; column++) {\r\n                stripe.push(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    createHTMLboard () {\r\n        let chessboard = document.createElement('div');\r\n        chessboard.classList.add('chessboard');\r\n        this.targetNode.appendChild(chessboard);\r\n        let chessboard__field = document.createElement('div');\r\n        chessboard__field.classList.add('chessboard__field');\r\n        chessboard.appendChild(chessboard__field);\r\n\r\n        for (let row = 0; row < 8; row++ ) {\r\n            for (let column = 0; column < 8; column++) {\r\n                let square = document.createElement('div');\r\n                \r\n                square.classList.add('chessboard__square');\r\n                let color = (row + column) % 2;\r\n                if (color == 0) {square.classList.add('chessboard__square_light');}\r\n                    else {square.classList.add('chessboard__square_dark');}\r\n                square.classList.add('position-' + column + '-' + row);\r\n                square.innerHTML = \" \";\r\n                square.positionX = column;\r\n                square.positionY  = row;\r\n                square.addEventListener('click', function clickSquare () {window.chessboard.handleClick(this.positionX, this.positionY);});\r\n                chessboard__field.appendChild(square);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleClick (potentialMoveX, potentialMoveY) {\r\n        // Если выбрали свою фигуру\r\n        if (\r\n            (\r\n            !(this['board'][potentialMoveX][potentialMoveY] == null) &&\r\n            this.turn == this['board'][potentialMoveX][potentialMoveY]['color']\r\n            )\r\n            ) {\r\n            this.stage = 'select move';\r\n            if (this.selectedPosition != null) {\r\n                this.clearPossibleMoves();\r\n            }\r\n            this.selectedPosition = [potentialMoveX, potentialMoveY];\r\n            this['board'][potentialMoveX][potentialMoveY].defineMoves();\r\n            this.renderPossibleMoves();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    loadPosition (position) {\r\n        for (let index = 0, max = position.length; index < max; index++ ) {\r\n            let piece = position[index];\r\n            if (piece.piece && \r\n                piece.color && \r\n                piece.hasOwnProperty('positionX') && \r\n                piece.hasOwnProperty('positionY') &&\r\n                piece.positionX < 8 &&\r\n                piece.positionX >= 0 &&\r\n                piece.positionY < 8 &&\r\n                piece.positionY >= 0 \r\n                ) \r\n                {\r\n                    if (piece.piece == 'king') {\r\n                        this['board'][piece.positionX][piece.positionY] = new Piece(piece.color, piece.piece, this, piece.positionX, piece.positionY);\r\n                    }\r\n                    if (piece.piece == 'pawn') {\r\n                        this['board'][piece.positionX][piece.positionY] = new Pawn(piece.color, piece.piece, this, piece.positionX, piece.positionY);\r\n                    }\r\n                    if (piece.piece == 'knight') {\r\n                        this['board'][piece.positionX][piece.positionY] = new Piece(piece.color, piece.piece, this, piece.positionX, piece.positionY);\r\n                    }\r\n                    if (piece.piece == 'rook') {\r\n                        this['board'][piece.positionX][piece.positionY] = new Piece(piece.color, piece.piece, this, piece.positionX, piece.positionY);\r\n                    }\r\n                    if (piece.piece == 'beeshop') {\r\n                        this['board'][piece.positionX][piece.positionY] = new Piece(piece.color, piece.piece, this, piece.positionX, piece.positionY);\r\n                    }\r\n                    if (piece.piece == 'queen') {\r\n                        this['board'][piece.positionX][piece.positionY] = new Piece(piece.color, piece.piece, this, piece.positionX, piece.positionY);\r\n                    }\r\n                }\r\n            \r\n        }\r\n    }\r\n\r\n    renderPosition () {\r\n        for (let row = 0; row < 8; row++) {\r\n            for (let column = 0; column <8; column++) {\r\n                let square = document.querySelector(`.position-${row}-${column}`);\r\n                if (this['board'][row][column] != null &&\r\n                    this['board'][row][column].hasOwnProperty('img')\r\n                    ) {\r\n                    square.style.backgroundImage = this['board'][row][column]['img'];\r\n                    square.style.backgroundSize = 'cover';\r\n                }\r\n                else {\r\n                    square.style.backgroundImage = '';\r\n                    square.style.backgroundSize = '';\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    clearPossibleMoves () {\r\n        for (let delPosition = 0; delPosition < this.possibleMoves.length; delPosition++) {\r\n            let square = document.querySelector(`.position-${this.possibleMoves[delPosition][0]}-${this.possibleMoves[delPosition][1]}`);\r\n            square.classList.remove('chessboard__possible-moves');\r\n        }\r\n        this.possibleMoves = [];\r\n        \r\n        let oldSelectedSquare = document.querySelector(`.position-${this.selectedPosition[0]}-${this.selectedPosition[1]}`);\r\n        oldSelectedSquare.classList.remove('chessboard__square_selected'); \r\n    }\r\n\r\n    renderPossibleMoves () {\r\n        let selectedSquare = document.querySelector(`.position-${this.selectedPosition[0]}-${this.selectedPosition[1]}`);\r\n        selectedSquare.classList.add('chessboard__square_selected');\r\n        for (let move = 0; move < this.possibleMoves.length; move++) {\r\n            let square = document.querySelector(`.position-${this.possibleMoves[move][0]}-${this.possibleMoves[move][1]}`);\r\n            square.classList.add('chessboard__possible-moves');\r\n        }\r\n    }\r\n\r\n}\n;// CONCATENATED MODULE: ./sources-js/script.js\n\r\n\r\n\r\nwindow.onload = function () {\r\n    window.chessboard = new Chessboard (document.querySelector('.chess'));\r\n    chessboard.createHTMLboard();\r\n    chessboard.loadPosition(chessboard.initialPosition);\r\n    chessboard.renderPosition();\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixTQUFTO0FBQ25DLGlDQUFpQyxXQUFXO0FBQzVDLGlFQUFpRSxJQUFJLEdBQUcsT0FBTztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx5Q0FBeUM7QUFDM0UsNkRBQTZELG1DQUFtQyxHQUFHLG1DQUFtQztBQUN0STtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSx5QkFBeUIsR0FBRyx5QkFBeUI7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUseUJBQXlCLEdBQUcseUJBQXlCO0FBQ3RIO0FBQ0EsMkJBQTJCLGtDQUFrQztBQUM3RCw2REFBNkQsNEJBQTRCLEdBQUcsNEJBQTRCO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQzs7QUMxTHdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlc3NnYW1lLy4vc291cmNlcy1qcy9waWVjZXMtY2xhc3Nlcy9waWVjZS5qcz80MGFhIiwid2VicGFjazovL2NoZXNzZ2FtZS8uL3NvdXJjZXMtanMvcGllY2VzLWNsYXNzZXMvcGF3bi5qcz9mNTA4Iiwid2VicGFjazovL2NoZXNzZ2FtZS8uL3NvdXJjZXMtanMvY2hlc3Nib2FyZC5qcz8xOTM5Iiwid2VicGFjazovL2NoZXNzZ2FtZS8uL3NvdXJjZXMtanMvc2NyaXB0LmpzPzQ3ZjkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFBpZWNlIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb2xvciwgdHlwZSwgY2hlc3Nib2FyZCwgcG9zaXRpb25YLCBwb3NpdGlvblkpIHtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmltZyA9ICd1cmwoaW1nL3BpZWNlcy8nICsgdHlwZS50b0xvd2VyQ2FzZSgpICsgJ18nICsgY29sb3IgKycuc3ZnKSc7XHJcbiAgICAgICAgdGhpcy5jaGVzc2JvYXJkID0gY2hlc3Nib2FyZDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uWCA9IHBvc2l0aW9uWDtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uWSA9IHBvc2l0aW9uWTtcclxuICAgIH1cclxuICAgIFxyXG59IiwiaW1wb3J0IHtQaWVjZX0gZnJvbSAnLi9waWVjZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUGF3biBleHRlbmRzIFBpZWNlIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb2xvciwgdHlwZSwgY2hlc3Nib2FyZCwgcG9zaXRpb25YLCBwb3NpdGlvblkpIHtcclxuICAgICAgICBzdXBlcihjb2xvcix0eXBlLCBjaGVzc2JvYXJkLCBwb3NpdGlvblgsIHBvc2l0aW9uWSk7XHJcbiAgICB9XHJcbiAgICBkZWZpbmVNb3ZlcyAoKSB7XHJcbiAgICAgICAgbGV0IHBvdGVudGlhbE1vdmVYID0gdGhpcy5wb3NpdGlvblg7XHJcbiAgICAgICAgbGV0IHBvdGVudGlhbE1vdmVZO1xyXG4gICAgICAgIC8v0YXQvtC0INCy0L/QtdGA0LXQtCAo0L3QtSDRgNGD0LHQuNGCKVxyXG4gICAgICAgIGxldCBtYXhNb3ZlO1xyXG4gICAgICAgIGxldCB2ZXJ0aWNhbDtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25ZID09IDEgJiYgdGhpcy5jb2xvciA9PSAnd2hpdGUnIHx8IFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uWSA9PSA2ICYmIHRoaXMuY29sb3IgPT0gJ2JsYWNrJ1xyXG4gICAgICAgICAgICApIFxyXG4gICAgICAgICAgICB7bWF4TW92ZSA9IDI7fVxyXG4gICAgICAgIGVsc2Uge21heE1vdmUgPSAxO30gXHJcbiAgICAgICAgZm9yICh2ZXJ0aWNhbCA9IDE7IHZlcnRpY2FsIDw9bWF4TW92ZTsgdmVydGljYWwrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvciA9PSAnd2hpdGUnKSB7cG90ZW50aWFsTW92ZVkgPSB0aGlzLnBvc2l0aW9uWSArIHZlcnRpY2FsO31cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3IgPT0gJ2JsYWNrJykge3BvdGVudGlhbE1vdmVZID0gdGhpcy5wb3NpdGlvblkgLSB2ZXJ0aWNhbDt9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoISh0aGlzWydjaGVzc2JvYXJkJ11bJ2JvYXJkJ11bcG90ZW50aWFsTW92ZVhdW3BvdGVudGlhbE1vdmVZXSA9PSBudWxsKSkge2JyZWFrO31cclxuICAgICAgICAgICAgdGhpcy5jaGVzc2JvYXJkLnBvc3NpYmxlTW92ZXMucHVzaChbcG90ZW50aWFsTW92ZVgsIHBvdGVudGlhbE1vdmVZXSk7ICBcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/RgdGA0YPQsdC40YLRjCDRhNC40LPRg9GA0YNcclxuICAgICAgICB2ZXJ0aWNhbCA9IDE7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgPT0gJ3doaXRlJykge3BvdGVudGlhbE1vdmVZID0gdGhpcy5wb3NpdGlvblkgKyB2ZXJ0aWNhbDt9XHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgPT0gJ2JsYWNrJykge3BvdGVudGlhbE1vdmVZID0gdGhpcy5wb3NpdGlvblkgLSB2ZXJ0aWNhbDt9XHJcbiAgICAgICAgZm9yIChsZXQgc2hpZnRYID0gLTE7IHNoaWZ0WCA8PSAxOyBzaGlmdFggKz0yKSB7XHJcbiAgICAgICAgICAgIHBvdGVudGlhbE1vdmVYID0gdGhpcy5wb3NpdGlvblggKyBzaGlmdFg7XHJcbiAgICAgICAgICAgIGlmIChwb3RlbnRpYWxNb3ZlWSA+IDcgfHxcclxuICAgICAgICAgICAgICAgIHBvdGVudGlhbE1vdmVZIDwgMCB8fFxyXG4gICAgICAgICAgICAgICAgcG90ZW50aWFsTW92ZVggPiA3IHx8XHJcbiAgICAgICAgICAgICAgICBwb3RlbnRpYWxNb3ZlWCA8IDAgfHxcclxuICAgICAgICAgICAgICAgIHRoaXNbJ2NoZXNzYm9hcmQnXVsnYm9hcmQnXVtwb3RlbnRpYWxNb3ZlWF1bcG90ZW50aWFsTW92ZVldID09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPT0gdGhpc1snY2hlc3Nib2FyZCddWydib2FyZCddW3BvdGVudGlhbE1vdmVYXVtwb3RlbnRpYWxNb3ZlWV1bJ2NvbG9yJ11cclxuICAgICAgICAgICAgICAgICkge2NvbnRpbnVlO31cclxuICAgICAgICAgICAgdGhpcy5jaGVzc2JvYXJkLnBvc3NpYmxlTW92ZXMucHVzaChbcG90ZW50aWFsTW92ZVgsIHBvdGVudGlhbE1vdmVZXSk7ICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1BpZWNlfSBmcm9tICcuL3BpZWNlcy1jbGFzc2VzL3BpZWNlJztcclxuaW1wb3J0IHtQYXdufSBmcm9tICcuL3BpZWNlcy1jbGFzc2VzL3Bhd24nO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoZXNzYm9hcmQge1xyXG4gICAgY29uc3RydWN0b3IgKHRhcmdldE5vZGUpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxQb3NpdGlvbiA9IFtcclxuICAgICAgICAgICAgLy93aGl0ZXNcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogMCwgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogMSwgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogMiwgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogMywgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogNCwgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogNSwgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogNiwgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInBhd25cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogNywgcG9zaXRpb25ZOiAxfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcInJvb2tcIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogMCwgcG9zaXRpb25ZOiAwfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcImtuaWdodFwiLCBjb2xvcjogJ3doaXRlJywgcG9zaXRpb25YOiAxLCBwb3NpdGlvblk6IDB9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwiYmVlc2hvcFwiLCBjb2xvcjogJ3doaXRlJywgcG9zaXRpb25YOiAyLCBwb3NpdGlvblk6IDB9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwia2luZ1wiLCBjb2xvcjogJ3doaXRlJywgcG9zaXRpb25YOiAzLCBwb3NpdGlvblk6IDB9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicXVlZW5cIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogNCwgcG9zaXRpb25ZOiAwfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcImJlZXNob3BcIiwgY29sb3I6ICd3aGl0ZScsIHBvc2l0aW9uWDogNSwgcG9zaXRpb25ZOiAwfSxcclxuICAgICAgICAgICAge3BpZWNlOiBcImtuaWdodFwiLCBjb2xvcjogJ3doaXRlJywgcG9zaXRpb25YOiA2LCBwb3NpdGlvblk6IDB9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicm9va1wiLCBjb2xvcjogJ3doaXRlJywgcG9zaXRpb25YOiA3LCBwb3NpdGlvblk6IDB9LFxyXG4gICAgICAgICAgICAvL2JsYWNrc1xyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiAwLCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiAxLCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiAyLCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiAzLCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiA0LCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiA1LCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiA2LCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicGF3blwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiA3LCBwb3NpdGlvblk6IDZ9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwicm9va1wiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiAwLCBwb3NpdGlvblk6IDd9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwia25pZ2h0XCIsIGNvbG9yOiAnYmxhY2snLCBwb3NpdGlvblg6IDEsIHBvc2l0aW9uWTogN30sXHJcbiAgICAgICAgICAgIHtwaWVjZTogXCJiZWVzaG9wXCIsIGNvbG9yOiAnYmxhY2snLCBwb3NpdGlvblg6IDIsIHBvc2l0aW9uWTogN30sXHJcbiAgICAgICAgICAgIHtwaWVjZTogXCJraW5nXCIsIGNvbG9yOiAnYmxhY2snLCBwb3NpdGlvblg6IDMsIHBvc2l0aW9uWTogN30sXHJcbiAgICAgICAgICAgIHtwaWVjZTogXCJxdWVlblwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiA0LCBwb3NpdGlvblk6IDd9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwiYmVlc2hvcFwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiA1LCBwb3NpdGlvblk6IDd9LFxyXG4gICAgICAgICAgICB7cGllY2U6IFwia25pZ2h0XCIsIGNvbG9yOiAnYmxhY2snLCBwb3NpdGlvblg6IDYsIHBvc2l0aW9uWTogN30sXHJcbiAgICAgICAgICAgIHtwaWVjZTogXCJyb29rXCIsIGNvbG9yOiAnYmxhY2snLCBwb3NpdGlvblg6IDcsIHBvc2l0aW9uWTogN30sXHJcbiAgICAgICAgICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgICAgICAgICAge3BpZWNlOiBcInF1ZWVuXCIsIGNvbG9yOiAnYmxhY2snLCBwb3NpdGlvblg6IDMsIHBvc2l0aW9uWTogMn0sXHJcbiAgICAgICAgICAgIHtwaWVjZTogXCJxdWVlblwiLCBjb2xvcjogJ2JsYWNrJywgcG9zaXRpb25YOiAzLCBwb3NpdGlvblk6IDV9LFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdGhpcy50YXJnZXROb2RlID0gdGFyZ2V0Tm9kZTtcclxuICAgICAgICB0aGlzLnR1cm4gPSAnd2hpdGUnOyBcclxuICAgICAgICB0aGlzLnN0YWdlID0gXCJzZWxlY3QgcGllY2VcIjsgLy/QktC+0LfQvNC+0LbQvdGL0LUg0LfQvdCw0YfQtdC90LjRjzogc2VsZWN0IHBpZWNlLCBzZWxlY3QgbW92ZVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQaWVjZSA9IG51bGw7IFxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQb3NpdGlvbiA9IG51bGw7IC8v0JLQvtC30LzQvtC20L3Ri9C1INC30L3QsNGH0LXQvdC40Y86IG51bGwg0LjQu9C4INC80LDRgdGB0LjQsiDQv9C+0LfQuNGG0LjQuCDQstGL0LHRgNCw0L3QvdC+0Lkg0YTQuNCz0YPRgNGLXHJcbiAgICAgICAgdGhpcy5wb3NzaWJsZU1vdmVzID0gW107IFxyXG4gICAgICAgIHRoaXMuYm9hcmQgPSBbXTsgXHJcbiAgICAgICAgdGhpcy5jcmVhdGVCb2FyZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUJvYXJkICgpIHtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCA4OyByb3crKyApIHtcclxuICAgICAgICAgICAgdGhpcy5ib2FyZC5wdXNoKFtdKTtcclxuICAgICAgICAgICAgbGV0IHN0cmlwZSA9IHRoaXNbJ2JvYXJkJ11bcm93XTtcclxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgODsgY29sdW1uKyspIHtcclxuICAgICAgICAgICAgICAgIHN0cmlwZS5wdXNoKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUhUTUxib2FyZCAoKSB7XHJcbiAgICAgICAgbGV0IGNoZXNzYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjaGVzc2JvYXJkLmNsYXNzTGlzdC5hZGQoJ2NoZXNzYm9hcmQnKTtcclxuICAgICAgICB0aGlzLnRhcmdldE5vZGUuYXBwZW5kQ2hpbGQoY2hlc3Nib2FyZCk7XHJcbiAgICAgICAgbGV0IGNoZXNzYm9hcmRfX2ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2hlc3Nib2FyZF9fZmllbGQuY2xhc3NMaXN0LmFkZCgnY2hlc3Nib2FyZF9fZmllbGQnKTtcclxuICAgICAgICBjaGVzc2JvYXJkLmFwcGVuZENoaWxkKGNoZXNzYm9hcmRfX2ZpZWxkKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgODsgcm93KysgKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IDg7IGNvbHVtbisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3F1YXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKCdjaGVzc2JvYXJkX19zcXVhcmUnKTtcclxuICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IChyb3cgKyBjb2x1bW4pICUgMjtcclxuICAgICAgICAgICAgICAgIGlmIChjb2xvciA9PSAwKSB7c3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2NoZXNzYm9hcmRfX3NxdWFyZV9saWdodCcpO31cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtzcXVhcmUuY2xhc3NMaXN0LmFkZCgnY2hlc3Nib2FyZF9fc3F1YXJlX2RhcmsnKTt9XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgncG9zaXRpb24tJyArIGNvbHVtbiArICctJyArIHJvdyk7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuaW5uZXJIVE1MID0gXCIgXCI7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUucG9zaXRpb25YID0gY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgc3F1YXJlLnBvc2l0aW9uWSAgPSByb3c7XHJcbiAgICAgICAgICAgICAgICBzcXVhcmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBjbGlja1NxdWFyZSAoKSB7d2luZG93LmNoZXNzYm9hcmQuaGFuZGxlQ2xpY2sodGhpcy5wb3NpdGlvblgsIHRoaXMucG9zaXRpb25ZKTt9KTtcclxuICAgICAgICAgICAgICAgIGNoZXNzYm9hcmRfX2ZpZWxkLmFwcGVuZENoaWxkKHNxdWFyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ2xpY2sgKHBvdGVudGlhbE1vdmVYLCBwb3RlbnRpYWxNb3ZlWSkge1xyXG4gICAgICAgIC8vINCV0YHQu9C4INCy0YvQsdGA0LDQu9C4INGB0LLQvtGOINGE0LjQs9GD0YDRg1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAhKHRoaXNbJ2JvYXJkJ11bcG90ZW50aWFsTW92ZVhdW3BvdGVudGlhbE1vdmVZXSA9PSBudWxsKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnR1cm4gPT0gdGhpc1snYm9hcmQnXVtwb3RlbnRpYWxNb3ZlWF1bcG90ZW50aWFsTW92ZVldWydjb2xvciddXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAnc2VsZWN0IG1vdmUnO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFBvc2l0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQb3NzaWJsZU1vdmVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFBvc2l0aW9uID0gW3BvdGVudGlhbE1vdmVYLCBwb3RlbnRpYWxNb3ZlWV07XHJcbiAgICAgICAgICAgIHRoaXNbJ2JvYXJkJ11bcG90ZW50aWFsTW92ZVhdW3BvdGVudGlhbE1vdmVZXS5kZWZpbmVNb3ZlcygpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclBvc3NpYmxlTW92ZXMoKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBsb2FkUG9zaXRpb24gKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBtYXggPSBwb3NpdGlvbi5sZW5ndGg7IGluZGV4IDwgbWF4OyBpbmRleCsrICkge1xyXG4gICAgICAgICAgICBsZXQgcGllY2UgPSBwb3NpdGlvbltpbmRleF07XHJcbiAgICAgICAgICAgIGlmIChwaWVjZS5waWVjZSAmJiBcclxuICAgICAgICAgICAgICAgIHBpZWNlLmNvbG9yICYmIFxyXG4gICAgICAgICAgICAgICAgcGllY2UuaGFzT3duUHJvcGVydHkoJ3Bvc2l0aW9uWCcpICYmIFxyXG4gICAgICAgICAgICAgICAgcGllY2UuaGFzT3duUHJvcGVydHkoJ3Bvc2l0aW9uWScpICYmXHJcbiAgICAgICAgICAgICAgICBwaWVjZS5wb3NpdGlvblggPCA4ICYmXHJcbiAgICAgICAgICAgICAgICBwaWVjZS5wb3NpdGlvblggPj0gMCAmJlxyXG4gICAgICAgICAgICAgICAgcGllY2UucG9zaXRpb25ZIDwgOCAmJlxyXG4gICAgICAgICAgICAgICAgcGllY2UucG9zaXRpb25ZID49IDAgXHJcbiAgICAgICAgICAgICAgICApIFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaWVjZS5waWVjZSA9PSAna2luZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1snYm9hcmQnXVtwaWVjZS5wb3NpdGlvblhdW3BpZWNlLnBvc2l0aW9uWV0gPSBuZXcgUGllY2UocGllY2UuY29sb3IsIHBpZWNlLnBpZWNlLCB0aGlzLCBwaWVjZS5wb3NpdGlvblgsIHBpZWNlLnBvc2l0aW9uWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaWVjZS5waWVjZSA9PSAncGF3bicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1snYm9hcmQnXVtwaWVjZS5wb3NpdGlvblhdW3BpZWNlLnBvc2l0aW9uWV0gPSBuZXcgUGF3bihwaWVjZS5jb2xvciwgcGllY2UucGllY2UsIHRoaXMsIHBpZWNlLnBvc2l0aW9uWCwgcGllY2UucG9zaXRpb25ZKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBpZWNlLnBpZWNlID09ICdrbmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJ2JvYXJkJ11bcGllY2UucG9zaXRpb25YXVtwaWVjZS5wb3NpdGlvblldID0gbmV3IFBpZWNlKHBpZWNlLmNvbG9yLCBwaWVjZS5waWVjZSwgdGhpcywgcGllY2UucG9zaXRpb25YLCBwaWVjZS5wb3NpdGlvblkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGllY2UucGllY2UgPT0gJ3Jvb2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJ2JvYXJkJ11bcGllY2UucG9zaXRpb25YXVtwaWVjZS5wb3NpdGlvblldID0gbmV3IFBpZWNlKHBpZWNlLmNvbG9yLCBwaWVjZS5waWVjZSwgdGhpcywgcGllY2UucG9zaXRpb25YLCBwaWVjZS5wb3NpdGlvblkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGllY2UucGllY2UgPT0gJ2JlZXNob3AnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbJ2JvYXJkJ11bcGllY2UucG9zaXRpb25YXVtwaWVjZS5wb3NpdGlvblldID0gbmV3IFBpZWNlKHBpZWNlLmNvbG9yLCBwaWVjZS5waWVjZSwgdGhpcywgcGllY2UucG9zaXRpb25YLCBwaWVjZS5wb3NpdGlvblkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGllY2UucGllY2UgPT0gJ3F1ZWVuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzWydib2FyZCddW3BpZWNlLnBvc2l0aW9uWF1bcGllY2UucG9zaXRpb25ZXSA9IG5ldyBQaWVjZShwaWVjZS5jb2xvciwgcGllY2UucGllY2UsIHRoaXMsIHBpZWNlLnBvc2l0aW9uWCwgcGllY2UucG9zaXRpb25ZKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJQb3NpdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgODsgcm93KyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDw4OyBjb2x1bW4rKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5wb3NpdGlvbi0ke3Jvd30tJHtjb2x1bW59YCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpc1snYm9hcmQnXVtyb3ddW2NvbHVtbl0gIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbJ2JvYXJkJ11bcm93XVtjb2x1bW5dLmhhc093blByb3BlcnR5KCdpbWcnKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSB0aGlzWydib2FyZCddW3Jvd11bY29sdW1uXVsnaW1nJ107XHJcbiAgICAgICAgICAgICAgICAgICAgc3F1YXJlLnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNxdWFyZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBzcXVhcmUuc3R5bGUuYmFja2dyb3VuZFNpemUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBjbGVhclBvc3NpYmxlTW92ZXMgKCkge1xyXG4gICAgICAgIGZvciAobGV0IGRlbFBvc2l0aW9uID0gMDsgZGVsUG9zaXRpb24gPCB0aGlzLnBvc3NpYmxlTW92ZXMubGVuZ3RoOyBkZWxQb3NpdGlvbisrKSB7XHJcbiAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9zaXRpb24tJHt0aGlzLnBvc3NpYmxlTW92ZXNbZGVsUG9zaXRpb25dWzBdfS0ke3RoaXMucG9zc2libGVNb3Zlc1tkZWxQb3NpdGlvbl1bMV19YCk7XHJcbiAgICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QucmVtb3ZlKCdjaGVzc2JvYXJkX19wb3NzaWJsZS1tb3ZlcycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvc3NpYmxlTW92ZXMgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgb2xkU2VsZWN0ZWRTcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9zaXRpb24tJHt0aGlzLnNlbGVjdGVkUG9zaXRpb25bMF19LSR7dGhpcy5zZWxlY3RlZFBvc2l0aW9uWzFdfWApO1xyXG4gICAgICAgIG9sZFNlbGVjdGVkU3F1YXJlLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZXNzYm9hcmRfX3NxdWFyZV9zZWxlY3RlZCcpOyBcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJQb3NzaWJsZU1vdmVzICgpIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRTcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9zaXRpb24tJHt0aGlzLnNlbGVjdGVkUG9zaXRpb25bMF19LSR7dGhpcy5zZWxlY3RlZFBvc2l0aW9uWzFdfWApO1xyXG4gICAgICAgIHNlbGVjdGVkU3F1YXJlLmNsYXNzTGlzdC5hZGQoJ2NoZXNzYm9hcmRfX3NxdWFyZV9zZWxlY3RlZCcpO1xyXG4gICAgICAgIGZvciAobGV0IG1vdmUgPSAwOyBtb3ZlIDwgdGhpcy5wb3NzaWJsZU1vdmVzLmxlbmd0aDsgbW92ZSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBzcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9zaXRpb24tJHt0aGlzLnBvc3NpYmxlTW92ZXNbbW92ZV1bMF19LSR7dGhpcy5wb3NzaWJsZU1vdmVzW21vdmVdWzFdfWApO1xyXG4gICAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZCgnY2hlc3Nib2FyZF9fcG9zc2libGUtbW92ZXMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHtDaGVzc2JvYXJkfSBmcm9tICcuL2NoZXNzYm9hcmQnO1xyXG5cclxuXHJcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cuY2hlc3Nib2FyZCA9IG5ldyBDaGVzc2JvYXJkIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlc3MnKSk7XHJcbiAgICBjaGVzc2JvYXJkLmNyZWF0ZUhUTUxib2FyZCgpO1xyXG4gICAgY2hlc3Nib2FyZC5sb2FkUG9zaXRpb24oY2hlc3Nib2FyZC5pbml0aWFsUG9zaXRpb24pO1xyXG4gICAgY2hlc3Nib2FyZC5yZW5kZXJQb3NpdGlvbigpO1xyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///461\n")}},__webpack_exports__={};__webpack_modules__[461]()})();