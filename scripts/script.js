(()=>{"use strict";class o{constructor(o,i,s,t,e){this.color=o,this.type=i,this.img="url(img/"+i.toLowerCase()+"_"+o+".svg)",this.chessboard=s,this.positionX=t,this.positionY=e}}class i extends o{constructor(o,i,s,t,e){super(o,i,s,t,e)}defineMoves(){let o,i,s,t=this.positionX;for(i=1==this.positionY&&"white"==this.color||6==this.positionY&&"black"==this.color?2:1,s=1;s<=i&&("white"==this.color&&(o=this.positionY+s),"black"==this.color&&(o=this.positionY-s),null==this.chessboard.board[t][o]);s++)this.chessboard.possibleMoves.push([t,o]);s=1,"white"==this.color&&(o=this.positionY+s),"black"==this.color&&(o=this.positionY-s);for(let i=-1;i<=1;i+=2)t=this.positionX+i,o>7||o<0||t>7||t<0||null==this.chessboard.board[t][o]||this.color==this.chessboard.board[t][o].color||this.chessboard.possibleMoves.push([t,o])}}class s{constructor(o){this.initialPosition=[{piece:"pawn",color:"white",positionX:0,positionY:1},{piece:"pawn",color:"white",positionX:1,positionY:1},{piece:"pawn",color:"white",positionX:2,positionY:1},{piece:"pawn",color:"white",positionX:3,positionY:1},{piece:"pawn",color:"white",positionX:4,positionY:1},{piece:"pawn",color:"white",positionX:5,positionY:1},{piece:"pawn",color:"white",positionX:6,positionY:1},{piece:"pawn",color:"white",positionX:7,positionY:1},{piece:"rook",color:"white",positionX:0,positionY:0},{piece:"knight",color:"white",positionX:1,positionY:0},{piece:"beeshop",color:"white",positionX:2,positionY:0},{piece:"king",color:"white",positionX:3,positionY:0},{piece:"queen",color:"white",positionX:4,positionY:0},{piece:"beeshop",color:"white",positionX:5,positionY:0},{piece:"knight",color:"white",positionX:6,positionY:0},{piece:"rook",color:"white",positionX:7,positionY:0},{piece:"pawn",color:"black",positionX:0,positionY:6},{piece:"pawn",color:"black",positionX:1,positionY:6},{piece:"pawn",color:"black",positionX:2,positionY:6},{piece:"pawn",color:"black",positionX:3,positionY:6},{piece:"pawn",color:"black",positionX:4,positionY:6},{piece:"pawn",color:"black",positionX:5,positionY:6},{piece:"pawn",color:"black",positionX:6,positionY:6},{piece:"pawn",color:"black",positionX:7,positionY:6},{piece:"rook",color:"black",positionX:0,positionY:7},{piece:"knight",color:"black",positionX:1,positionY:7},{piece:"beeshop",color:"black",positionX:2,positionY:7},{piece:"king",color:"black",positionX:3,positionY:7},{piece:"queen",color:"black",positionX:4,positionY:7},{piece:"beeshop",color:"black",positionX:5,positionY:7},{piece:"knight",color:"black",positionX:6,positionY:7},{piece:"rook",color:"black",positionX:7,positionY:7},{piece:"queen",color:"black",positionX:3,positionY:2},{piece:"queen",color:"black",positionX:3,positionY:5}],this.targetNode=o,this.turn="white",this.stage="select piece",this.selectedPiece=null,this.selectedPosition=null,this.possibleMoves=[],this.board=[],this.createBoard()}createBoard(){for(let o=0;o<8;o++){this.board.push([]);let i=this.board[o];for(let o=0;o<8;o++)i.push(null)}}createHTMLboard(){let o=document.createElement("div");o.classList.add("chessboard"),this.targetNode.appendChild(o);let i=document.createElement("div");i.classList.add("chessboard__field"),o.appendChild(i);for(let o=0;o<8;o++)for(let s=0;s<8;s++){let t=document.createElement("div");t.classList.add("chessboard__square"),0==(o+s)%2?t.classList.add("chessboard__square_light"):t.classList.add("chessboard__square_dark"),t.classList.add("position-"+s+"-"+o),t.innerHTML=" ",t.positionX=s,t.positionY=o,t.addEventListener("click",(function(){window.chessboard.handleClick(this.positionX,this.positionY)})),i.appendChild(t)}}handleClick(o,i){}loadPosition(s){for(let t=0,e=s.length;t<e;t++){let e=s[t];e.piece&&e.color&&e.hasOwnProperty("positionX")&&e.hasOwnProperty("positionY")&&e.positionX<8&&e.positionX>=0&&e.positionY<8&&e.positionY>=0&&("king"==e.piece&&(this.board[e.positionX][e.positionY]=new o(e.color,e.piece,this,e.positionX,e.positionY)),"pawn"==e.piece&&(this.board[e.positionX][e.positionY]=new i(e.color,e.piece,this,e.positionX,e.positionY)),"knight"==e.piece&&(this.board[e.positionX][e.positionY]=new o(e.color,e.piece,this,e.positionX,e.positionY)),"rook"==e.piece&&(this.board[e.positionX][e.positionY]=new o(e.color,e.piece,this,e.positionX,e.positionY)),"beeshop"==e.piece&&(this.board[e.positionX][e.positionY]=new o(e.color,e.piece,this,e.positionX,e.positionY)),"queen"==e.piece&&(this.board[e.positionX][e.positionY]=new o(e.color,e.piece,this,e.positionX,e.positionY)))}}renderPosition(){for(let o=0;o<8;o++)for(let i=0;i<8;i++){let s=document.querySelector(`.position-${o}-${i}`);null!=this.board[o][i]&&this.board[o][i].hasOwnProperty("img")?(s.style.backgroundImage=this.board[o][i].img,s.style.backgroundSize="cover"):(s.style.backgroundImage="",s.style.backgroundSize="")}}}window.onload=function(){window.chessboard=new s(document.querySelector(".chess")),chessboard.createHTMLboard(),chessboard.loadPosition(chessboard.initialPosition),chessboard.renderPosition()}})();